{"version":3,"file":"index-b006212b.js","sources":["../../src/js/app.js"],"sourcesContent":["import { CocktailAPI } from \"./API/api.js\";\nimport { CocktailComponents } from \"./components/renderCoctails.js\";\nimport { Favorites } from \"./utils/favorites.js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", initApp);\n\nasync function searchHeader() {\n  const search = document.querySelector(\".header__btn\");\n  const searchInput = document.querySelector(\".header__input\");\n  const cocktailsList = document.querySelector(\".cocktails__list\");\n\n  search.addEventListener(\"click\", async (e) => {\n    try {\n      const data = await CocktailAPI.fetchCocktailsByName(searchInput.value);\n      CocktailComponents.renderCocktailsList(cocktailsList, data);\n    } catch (error) {\n      handleError(cocktailsList);\n    }\n  });\n}\n\nsearchHeader();\n\nasync function initApp() {\n  const cocktailsList = document.querySelector(\".cocktails__list\");\n\n  try {\n    const data = await CocktailAPI.fetchNonAlcoholicCocktails();\n    CocktailComponents.renderCocktailsList(cocktailsList, data.drinks);\n  } catch (error) {\n    handleError(cocktailsList, error);\n  }\n\n  cocktailsList.addEventListener(\"click\", handleCocktailClick);\n}\n\nfunction handleError(container, error) {\n  console.error(\"Error:\", error);\n  container.innerHTML = `\n    <li class=\"error-item\">\n      <p class=\"error-message\">Sorry, we didn't find any cocktail for you</p>\n\t\t<img class=\"error-image\" src=\"./images/failed.png\" alt=\"failed to load cocktails\">\n    </li>\n  `;\n}\n\nasync function handleCocktailClick(event) {\n  const learnMoreBtn = event.target.closest(\".js-learn-more\");\n  const favoriteBtn = event.target.closest(\".js-favorite\");\n\n  if (learnMoreBtn) {\n    const cocktailItem = learnMoreBtn.closest(\"[data-id]\");\n    if (!cocktailItem) return;\n    \n    const cocktailId = cocktailItem.dataset.id;\n\n    try {\n      const data = await CocktailAPI.fetchCocktailById(cocktailId);\n      if (!data?.drinks?.[0]) throw new Error(\"No cocktail data\");\n      \n      const modalHtml = CocktailComponents.renderModal(data.drinks[0]);\n      \n      document.querySelectorAll(\".cocktails-modal__backdrop\").forEach(m => m.remove());\n      \n      document.body.insertAdjacentHTML(\"beforeend\", modalHtml);\n      setupModal(cocktailId);\n    } catch (error) {\n      console.error(\"Failed to fetch cocktail details:\", error);\n    }\n  }\n\n  if (favoriteBtn) {\n    const cocktailItem = favoriteBtn.closest(\"[data-id]\");\n    if (!cocktailItem) return;\n    \n    const cocktailId = cocktailItem.dataset.id;\n    toggleFavorite(cocktailId, favoriteBtn);\n  }\n}\n\nfunction setupModal(cocktailId) {\n  const backdrop = document.querySelector(\".cocktails-modal__backdrop\");\n  if (!backdrop) return;\n\n  setTimeout(() => backdrop.classList.add(\"is-visible\"), 10);\n\n  const closeModal = () => {\n    backdrop.classList.remove(\"is-visible\");\n    setTimeout(() => backdrop.remove(), 300);\n  };\n\n  backdrop.querySelector(\".js-modal-close\")?.addEventListener(\"click\", closeModal);\n  backdrop.addEventListener(\"click\", (e) => e.target === backdrop && closeModal());\n\n  const modalFavoriteBtn = backdrop.querySelector(\".js-favorite\");\n  if (modalFavoriteBtn) {\n    modalFavoriteBtn.addEventListener(\"click\", () => {\n      toggleFavorite(cocktailId, modalFavoriteBtn);\n    });\n  }\n}\n\nfunction toggleFavorite(id, button) {\n  const isFavorite = Favorites.isFavorite(id);\n  const newState = !isFavorite;\n\n  newState ? Favorites.addFavorite(id) : Favorites.removeFavorite(id);\n\n  button.classList.toggle(\"is-active\", newState);\n  updateButtonUI(button, newState);\n\n  const allButtons = document.querySelectorAll(`\n    [data-id=\"${id}\"] .js-favorite,\n    .cocktails-modal__favorite-button[data-id=\"${id}\"]\n  `);\n\n  allButtons.forEach((btn) => {\n    if (btn !== button) {\n      btn.classList.toggle(\"is-active\", newState);\n      updateButtonUI(btn, newState);\n    }\n  });\n}\n\nfunction updateButtonUI(button, isActive) {\n  const textElement = button.querySelector(\".cocktails__favorite-title\") || button;\n  const isModal = button.classList.contains(\"cocktails-modal__favorite-button\");\n\n  textElement.textContent = isActive\n    ? (isModal ? \"Remove fav\" : \"Remove\")\n    : (isModal ? \"Add to favorite\" : \"Add to\");\n}"],"names":["initApp","searchHeader","search","searchInput","cocktailsList","e","data","CocktailAPI","CocktailComponents","handleError","error","handleCocktailClick","container","event","learnMoreBtn","favoriteBtn","cocktailItem","cocktailId","_a","modalHtml","m","setupModal","toggleFavorite","backdrop","closeModal","modalFavoriteBtn","id","button","newState","Favorites","updateButtonUI","btn","isActive","textElement","isModal"],"mappings":"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"}