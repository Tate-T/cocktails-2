import{C as n,a as l,F as i}from"./hero-fa80a534.js";document.addEventListener("DOMContentLoaded",y);async function v(){const e=document.querySelector(".header__btn"),t=document.querySelector(".header__input"),c=document.querySelector(".cocktails__list");e.addEventListener("click",async o=>{try{const a=await n.fetchCocktailsByName(t.value);l.renderCocktailsList(c,a)}catch{m(c)}})}v();async function y(){const e=document.querySelector(".cocktails__list");try{const t=await n.fetchNonAlcoholicCocktails();l.renderCocktailsList(e,t.drinks)}catch(t){m(e,t)}e.addEventListener("click",h)}function m(e,t){console.error("Error:",t),e.innerHTML=`
    <li class="error-item">
      <p class="error-message">Sorry, we didn't find any cocktail for you</p>
		<img class="error-image" src="./images/failed.png" alt="failed to load cocktails">
    </li>
  `}async function h(e){var o;const t=e.target.closest(".js-learn-more"),c=e.target.closest(".js-favorite");if(t){const a=t.closest("[data-id]");if(!a)return;const r=a.dataset.id;try{const s=await n.fetchCocktailById(r);if(!((o=s==null?void 0:s.drinks)!=null&&o[0]))throw new Error("No cocktail data");const k=l.renderModal(s.drinks[0]);document.querySelectorAll(".cocktails-modal__backdrop").forEach(f=>f.remove()),document.body.insertAdjacentHTML("beforeend",k),L(r)}catch(s){console.error("Failed to fetch cocktail details:",s)}}if(c){const a=c.closest("[data-id]");if(!a)return;const r=a.dataset.id;u(r,c)}}function L(e){var a;const t=document.querySelector(".cocktails-modal__backdrop");if(!t)return;setTimeout(()=>t.classList.add("is-visible"),10);const c=()=>{t.classList.remove("is-visible"),setTimeout(()=>t.remove(),300)};(a=t.querySelector(".js-modal-close"))==null||a.addEventListener("click",c),t.addEventListener("click",r=>r.target===t&&c());const o=t.querySelector(".js-favorite");o&&o.addEventListener("click",()=>{u(e,o)})}function u(e,t){const o=!i.isFavorite(e);o?i.addFavorite(e):i.removeFavorite(e),t.classList.toggle("is-active",o),d(t,o),document.querySelectorAll(`
    [data-id="${e}"] .js-favorite,
    .cocktails-modal__favorite-button[data-id="${e}"]
  `).forEach(r=>{r!==t&&(r.classList.toggle("is-active",o),d(r,o))})}function d(e,t){const c=e.querySelector(".cocktails__favorite-title")||e,o=e.classList.contains("cocktails-modal__favorite-button");c.textContent=t?o?"Remove fav":"Remove":o?"Add to favorite":"Add to"}
