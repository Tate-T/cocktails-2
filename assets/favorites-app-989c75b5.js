import{F as c,C as s,a as l}from"./index-8d166821.js";document.addEventListener("DOMContentLoaded",async()=>{const e=document.querySelector(".favorite-coctails__list"),t=document.querySelector(".favorite-coctails__pretitle");if(!e||!t)return;const r=c.getFavorites();if(r.length===0){t.textContent="You haven't added any favorite cocktails yet",t.style.display="block",e.innerHTML="";return}try{const o=await k(r);if(!o.length){t.textContent="No favorite cocktails found",t.style.display="block";return}s.renderFavoritesList(e,o),t.style.display="none",g()}catch(o){F(o)}});async function k(e){const t=e.map(o=>l.fetchCocktailById(o));return(await Promise.all(t)).filter(o=>{var i;return(i=o==null?void 0:o.drinks)==null?void 0:i[0]}).map(o=>o.drinks[0])}function g(){document.addEventListener("click",e=>{y(e),p(e),L(e)})}async function y(e){var i;const t=e.target.closest(".js-learn-more");if(!t)return;const r=t.closest("[data-id]");if(!r)return;const o=r.dataset.id;try{const n=await l.fetchCocktailById(o);if(!((i=n==null?void 0:n.drinks)!=null&&i[0]))throw new Error("No cocktail data");const a=s.renderModal(n.drinks[0]);document.querySelectorAll(".cocktails-modal__backdrop:not(.ingredient-modal-backdrop)").forEach(m=>m.remove()),document.body.insertAdjacentHTML("beforeend",a),_(o)}catch(n){console.error("Failed to fetch cocktail details:",n)}}async function L(e){var o;const t=e.target.closest(".js-ingredient-link");if(!t)return;const r=t.dataset.ingredient;try{const i=await l.fetchIngredientByName(r);if(!((o=i==null?void 0:i.ingredients)!=null&&o[0]))throw new Error("No ingredient data");document.querySelectorAll(".ingredient-modal-backdrop").forEach(a=>a.remove());const n=s.renderIngredientModal(i.ingredients[0]);document.body.insertAdjacentHTML("beforeend",n),h()}catch(i){console.error("Failed to fetch ingredient details:",i)}}function p(e){const t=e.target.closest(".js-favorite");if(!t)return;const r=t.closest("[data-id]");if(!r)return;const o=r.dataset.id;if(v(o,t),!c.isFavorite(o)){const i=document.querySelector(`
      .favorite-coctails__list [data-id="${o}"]
    `);if(i){i.remove();const n=!!document.querySelector(".favorite-coctails__list li"),a=document.querySelector(".favorite-coctails__pretitle");a&&(a.textContent="You haven't added any favorite cocktails yet",a.style.display=n?"none":"block")}}}function _(e){var i;const t=document.querySelector(".cocktails-modal__backdrop:not(.ingredient-modal-backdrop)");if(!t)return;setTimeout(()=>t.classList.add("is-visible"),10);const r=()=>{t.classList.remove("is-visible"),setTimeout(()=>t.remove(),300)};(i=t.querySelector(".js-modal-close"))==null||i.addEventListener("click",r),t.addEventListener("click",n=>n.target===t&&r());const o=t.querySelector(".js-favorite");o&&o.addEventListener("click",()=>v(e,o)),t.querySelectorAll(".js-ingredient-favorite").forEach(n=>{n.addEventListener("click",()=>{const a=n.dataset.ingredient;a&&u(a,n)})})}function h(){var o;const e=document.querySelector(".ingredient-modal-backdrop");if(!e)return;setTimeout(()=>e.classList.add("is-visible"),10);const t=()=>{e.classList.remove("is-visible"),setTimeout(()=>e.remove(),300)};(o=e.querySelector(".js-ingredient-modal-close"))==null||o.addEventListener("click",t),e.addEventListener("click",i=>i.target===e&&t());const r=e.querySelector(".js-ingredient-favorite");if(r){const i=r.dataset.ingredient;r.addEventListener("click",()=>{u(i,r)})}}function v(e,t){const o=!c.isFavorite(e);o?c.addFavorite(e):c.removeFavorite(e),t.classList.toggle("is-active",o),d(t,o),document.querySelectorAll(`[data-id="${e}"] .js-favorite, .cocktails-modal__favorite-button[data-id="${e}"]`).forEach(i=>{i!==t&&(i.classList.toggle("is-active",o),d(i,o))})}function u(e,t){const o=!c.isIngredientFavorite(e);o?c.addFavoriteIngredient(e):c.removeFavoriteIngredient(e),t.classList.toggle("is-active",o),f(t,o),document.querySelectorAll(`.js-ingredient-favorite[data-ingredient="${e}"]`).forEach(i=>{i!==t&&(i.classList.toggle("is-active",o),f(i,o))})}function d(e,t){const r=e.querySelector(".cocktails__favorite-title")||e.querySelector(".button-text")||e,o=e.classList.contains("cocktails-modal__favorite-button");r&&(r.textContent=t?o?"Remove from favorite":"Remove":o?"Add to favorite":"Add to")}function f(e,t){const r=e.querySelector(".cocktails__favorite-title")||e.querySelector(".button-text")||e,o=e.classList.contains("cocktails-modal__favorite-button");r&&(r.textContent=t?o?"Remove from favorite":"Remove":o?"Add to favorite":"Add to")}function F(e){console.error("Error loading favorites:",e);const t=document.querySelector(".favorite-coctails__pretitle");t&&(t.textContent="Failed to load favorite cocktails",t.style.display="block")}
