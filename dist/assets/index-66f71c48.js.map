{"version":3,"file":"index-66f71c48.js","sources":["../../src/js/app.js"],"sourcesContent":["import { CocktailAPI } from \"./API/api.js\";\r\nimport { CocktailComponents } from \"./components/renderCoctails.js\";\r\nimport { Favorites } from \"./utils/favorites.js\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", initApp);\r\n\r\nasync function searchHeader() {\r\n  const search = document.querySelector(\".header__btn\");\r\n  const searchInput = document.querySelector(\".header__input\");\r\n  const cocktailsList = document.querySelector(\".cocktails__list\");\r\n\r\n  search.addEventListener(\"click\", async (e) => {\r\n    try {\r\n      const data = await CocktailAPI.fetchCocktailsByName(searchInput.value);\r\n      CocktailComponents.renderCocktailsList(cocktailsList, data);\r\n    } catch (error) {\r\n      handleError(cocktailsList);\r\n    }\r\n  });\r\n}\r\n\r\nsearchHeader();\r\n\r\nasync function initApp() {\r\n  const cocktailsList = document.querySelector(\".cocktails__list\");\r\n\r\n  try {\r\n    const data = await CocktailAPI.fetchNonAlcoholicCocktails();\r\n    CocktailComponents.renderCocktailsList(cocktailsList, data.drinks);\r\n  } catch (error) {\r\n    handleError(cocktailsList, error);\r\n  }\r\n\r\n  cocktailsList.addEventListener(\"click\", handleCocktailClick);\r\n}\r\n\r\nfunction handleError(container, error) {\r\n  console.error(\"Error:\", error);\r\n  container.innerHTML = `\r\n    <li class=\"error-item\">\r\n      <p class=\"error-message\">Sorry, we didn't find any cocktail for you</p>\r\n\t\t<img class=\"error-image\" src=\"./images/failed.png\" alt=\"failed to load cocktails\">\r\n    </li>\r\n  `;\r\n}\r\n\r\nasync function handleCocktailClick(event) {\r\n  const learnMoreBtn = event.target.closest(\".js-learn-more\");\r\n  const favoriteBtn = event.target.closest(\".js-favorite\");\r\n\r\n  if (learnMoreBtn) {\r\n    const cocktailItem = learnMoreBtn.closest(\"[data-id]\");\r\n    if (!cocktailItem) return;\r\n    \r\n    const cocktailId = cocktailItem.dataset.id;\r\n\r\n    try {\r\n      const data = await CocktailAPI.fetchCocktailById(cocktailId);\r\n      if (!data?.drinks?.[0]) throw new Error(\"No cocktail data\");\r\n      \r\n      const modalHtml = CocktailComponents.renderModal(data.drinks[0]);\r\n      \r\n      document.querySelectorAll(\".cocktails-modal__backdrop\").forEach(m => m.remove());\r\n      \r\n      document.body.insertAdjacentHTML(\"beforeend\", modalHtml);\r\n      setupModal(cocktailId);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch cocktail details:\", error);\r\n    }\r\n  }\r\n\r\n  if (favoriteBtn) {\r\n    const cocktailItem = favoriteBtn.closest(\"[data-id]\");\r\n    if (!cocktailItem) return;\r\n    \r\n    const cocktailId = cocktailItem.dataset.id;\r\n    toggleFavorite(cocktailId, favoriteBtn);\r\n  }\r\n}\r\n\r\nfunction setupModal(cocktailId) {\r\n  const backdrop = document.querySelector(\".cocktails-modal__backdrop\");\r\n  if (!backdrop) return;\r\n\r\n  setTimeout(() => backdrop.classList.add(\"is-visible\"), 10);\r\n\r\n  const closeModal = () => {\r\n    backdrop.classList.remove(\"is-visible\");\r\n    setTimeout(() => backdrop.remove(), 300);\r\n  };\r\n\r\n  backdrop.querySelector(\".js-modal-close\")?.addEventListener(\"click\", closeModal);\r\n  backdrop.addEventListener(\"click\", (e) => e.target === backdrop && closeModal());\r\n\r\n  const modalFavoriteBtn = backdrop.querySelector(\".js-favorite\");\r\n  if (modalFavoriteBtn) {\r\n    modalFavoriteBtn.addEventListener(\"click\", () => {\r\n      toggleFavorite(cocktailId, modalFavoriteBtn);\r\n    });\r\n  }\r\n}\r\n\r\nfunction toggleFavorite(id, button) {\r\n  const isFavorite = Favorites.isFavorite(id);\r\n  const newState = !isFavorite;\r\n\r\n  newState ? Favorites.addFavorite(id) : Favorites.removeFavorite(id);\r\n\r\n  button.classList.toggle(\"is-active\", newState);\r\n  updateButtonUI(button, newState);\r\n\r\n  const allButtons = document.querySelectorAll(`\r\n    [data-id=\"${id}\"] .js-favorite,\r\n    .cocktails-modal__favorite-button[data-id=\"${id}\"]\r\n  `);\r\n\r\n  allButtons.forEach((btn) => {\r\n    if (btn !== button) {\r\n      btn.classList.toggle(\"is-active\", newState);\r\n      updateButtonUI(btn, newState);\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateButtonUI(button, isActive) {\r\n  const textElement = button.querySelector(\".cocktails__favorite-title\") || button;\r\n  const isModal = button.classList.contains(\"cocktails-modal__favorite-button\");\r\n\r\n  textElement.textContent = isActive\r\n    ? (isModal ? \"Remove fav\" : \"Remove\")\r\n    : (isModal ? \"Add to favorite\" : \"Add to\");\r\n}"],"names":["initApp","searchHeader","search","searchInput","cocktailsList","e","data","CocktailAPI","CocktailComponents","handleError","error","handleCocktailClick","container","event","learnMoreBtn","favoriteBtn","cocktailItem","cocktailId","_a","modalHtml","m","setupModal","toggleFavorite","backdrop","closeModal","modalFavoriteBtn","id","button","newState","Favorites","updateButtonUI","btn","isActive","textElement","isModal"],"mappings":"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"}